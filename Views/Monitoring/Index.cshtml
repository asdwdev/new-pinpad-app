@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Monitoring";
}

<div class="mb-4 text-sm px-4 sm:px-0">
    <a href="#" class="text-teal-500 font-semibold hover:text-teal-600 transition-colors">Pinpad List</a> /
    <span class="text-gray-500">Inquiry</span>
</div>

<!-- Filter Form -->
<div class="bg-white p-6 rounded-lg shadow mb-6">


    <!-- Two Column Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

        <!-- Left Column -->
        <div class="space-y-6">
            <!-- Regional -->
            <div>
                <label class="block text-gray-700 text-sm font-medium mb-2">Regional:</label>
                <select
                    class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all">
                    <option>--Select Regional--</option>
                    <option>Kanwil Jakarta I</option>
                    <option>Kanwil Jakarta II</option>
                    <option>Kanwil Bandung</option>
                    <option>Kanwil Surabaya</option>
                </select>
            </div>

            <!-- Cabang Induk -->
            <div>
                <label class="block text-gray-700 text-sm font-medium mb-2">Cabang Induk:</label>
                <select
                    class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all">
                    <option>--Select Cabang Induk--</option>
                    <option>00701 - KCS JAKARTA HARMONI</option>
                    <option>00702 - KCS JAKARTA THAMRIN</option>
                    <option>00703 - KCS BANDUNG</option>
                </select>
            </div>

            <!-- Outlet -->
            <div>
                <label class="block text-gray-700 text-sm font-medium mb-2">Outlet:</label>
                <select
                    class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all">
                    <option>--Select Outlet--</option>
                    <option>00727 - KCPS Jakarta Tanah Abang</option>
                    <option>00728 - KCPS Jakarta Senen</option>
                    <option>00729 - KCPS Bandung</option>
                </select>
            </div>
        </div>

        <!-- Right Column -->
        <div class="space-y-6">
            <!-- Serial Number -->
            <div>
                <label class="block text-gray-700 text-sm font-medium mb-2">Serial Number:</label>
                <input type="text" placeholder="Please enter your Serial Number"
                    class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all">
            </div>

            <!-- Username -->
            <div>
                <label class="block text-gray-700 text-sm font-medium mb-2">Username:</label>
                <input type="text" placeholder="Please enter your Username"
                    class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all">
            </div>

            <!-- Status -->
            <div>
                <label class="block text-gray-700 text-sm font-medium mb-2">Status:</label>
                <select
                    class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all">
                    <option>--Select Status Pinpad--</option>
                    <option>Ready To Use</option>
                    <option>Not Ready To Use</option>
                    <option>Maintenance</option>
                    <option>In Use</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Search Button - Right Aligned -->
    <div class="mt-8 flex justify-end">
        <button
            class="bg-teal-500 hover:bg-teal-600 text-white px-8 py-3 rounded-lg font-medium transition-colors shadow-md hover:shadow-lg">
            <i class="fa fa-search mr-2"></i>Search
        </button>
    </div>
</div>

<!-- Table Container -->
<div class="bg-white shadow rounded-lg border border-gray-200 overflow-hidden">


    <!-- Custom Search and Length Menu -->
    <div class="px-4 sm:px-6 py-6 border-b border-gray-200">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4">
            <!-- Length Menu -->
            <div class="flex items-center gap-2">
                <label class="text-sm font-medium text-gray-700">Show:</label>
                <select id="pageSize"
                    class="border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
                <span class="text-sm text-gray-600">entries</span>
            </div>

            <!-- Search Box -->
            <div class="flex items-center gap-2">
                <label class="text-sm font-medium text-gray-700">Search:</label>
                <input type="text" id="searchInput" placeholder="Search in all columns..."
                    class="border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[250px]">
            </div>
        </div>
    </div>

    <!-- Table Responsive Wrapper -->
    <div class="table-responsive">
        <table id="pinpadListTable" class="w-full text-left border-collapse min-w-full">
            <thead>
                <tr class="bg-gray-100 text-gray-700 text-sm">
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Regional</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Cabang Induk</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Kode Outlet</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Location</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Register</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Update Date</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Serial Number</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>TID</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Status Pinpad</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Create By</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>IP Low</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>IP High</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Last Activity</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                    <th class="px-4 py-3 font-semibold cursor-pointer hover:bg-gray-200 transition-colors whitespace-nowrap"
                        data-sortable="true">
                        <div class="flex items-center justify-between">
                            <span>Register</span>
                            <div class="sort-indicator">
                                <i class="fa fa-sort text-gray-400"></i>
                                <i class="fa fa-sort-up text-blue-500 hidden"></i>
                                <i class="fa fa-sort-down text-blue-500 hidden"></i>
                            </div>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody id="tableBody" class="text-sm">

            </tbody>
        </table>
    </div>

    <!-- Custom Pagination and Info -->
    <div class="px-4 sm:px-6 py-4 border-t border-gray-200">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4">
            <!-- Info -->
            <div id="tableInfo" class="text-sm text-gray-600">
                Showing 1 to 3 of 3 entries
            </div>

            <!-- Pagination -->
            <div id="pagination" class="flex items-center gap-1">
                <button id="prevBtn"
                    class="px-3 py-2 text-sm border border-gray-300 rounded hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled>
                    Previous
                </button>
                <button
                    class="page-btn current px-3 py-2 text-sm border border-blue-500 bg-blue-500 text-white rounded">1</button>
                <button id="nextBtn"
                    class="px-3 py-2 text-sm border border-gray-300 rounded hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled>
                    Next
                </button>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $.ajax({
                url: "http://localhost:5125/api/pinpads",
                method: "GET",
                dataType: "json",
                success: function (json) {
                    if (json.success) {
                        let tbody = $("#tableBody");
                        tbody.empty(); // kosongin dulu

                        $.each(json.data, function (i, p) {
                            let tr = `
                                <tr class="hover:bg-gray-50 border-b border-gray-200">
                                    <td class="px-4 py-3 whitespace-nowrap">${p.regional || '-'}</td>
                                    <td class="px-4 py-3 whitespace-nowrap">${p.ppadId || '-'}</td>
                                    <td class="px-4 py-3 whitespace-nowrap">${p.ppadSn || '-'}</td>
                                    <td class="px-4 py-3 whitespace-nowrap">${p.ppadStatus || '-'}</td>
                                    <td class="px-4 py-3 whitespace-nowrap">${p.ppadUpdateDate || '-'}</td>
                                </tr>
                            `;
                            tbody.append(tr);
                        });
                    } else {
                        console.error("API error:", json.message);
                    }
                },
                error: function (xhr, status, error) {
                    console.error("Fetch error:", status, error);
                    console.error("Response text:", xhr.responseText);
                }
            });
        });
    </script>
}
